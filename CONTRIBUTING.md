# Améliorer le site public des API des administrations


## Ajouter une API

### [En un clic par l'interface web de GitHub](https://github.com/sgmap/api.gouv.fr/new/gh-pages/_api?filename=_api/nom_api.md&value=---%0D%0Aname%3A+Nom+API+%23nom+de+l%27API%0D%0Atagline%3A+Mission+de+l%27API+%23+description+courte+de+l%27API%0D%0Adoc_tech%3A+http%3A%2F%2Fdoc.api.com+%23+lien+vers+la+documentation+technique+de+l%27API%0D%0Aaccess_link%3A+http%3A%2F%2Fregistration.api.com+%23+lien+vers+la+page+d%27enregistrement+de+l%27API+%7C+optionnel%0D%0Adomain%3A+http%3A%2F%2Fapi.com+%23+lien+vers+le+domain+de+l%27API%0D%0Acontract%3A+OUVERT+sous+contrat+%23+type+de+contrat+%28OUVERT%2C+OUVERT+sous+contrat%29%0D%0Arestriction%3A+toto+%23+restriction+de+l%27utilisation+de+l%27API+%7C+optionnel%0D%0Aclients%3A+%23+liste+des+personnes+pouvant+utiliser+l%27API%0D%0A++-+client1%0D%0A++-+client2%0D%0Apartners%3A+%23+liste+des+partenaires%0D%0A++-+Partenaire1%0D%0A++-+Partenaire2%0D%0Aowner%3A+DINSIC+%23+organisme+g%C3%A9rant+l%27API%0D%0Atype%3A+confidential+%23+type+de+donn%C3%A9e%2C+voir+le+champs+id+dans+le+fichier+_config%0D%0Akeywords%3A+%23+liste+des+mots+cl%C3%A9s+utilis%C3%A9s+lors+de+la+recherche%0D%0A++-+toto%0D%0A++-+tutu%0D%0A++-+titi%0D%0Alogo%3A+%23+URL+vers+un+logo+de+l%27API+%7C+optionnel%0D%0A---%0D%0A%0D%0A%23%23+Description+de+l%27API%0D%0A%0D%0ATexte+libre+au+format+%5BMarkdown%5D%28http%3A%2F%2Fricostacruz.com%2Fcheatsheets%2Fmarkdown.html%29.%0D%0A%0D%0A%0D%0A%23%23+Rappel%0D%0A%0D%0A-+%5B+%5D+Modifier+le+nom+du+fichier+%60nom_api.md%60+dans+le+champ+ci-dessus.%0D%0A-+%5B+%5D+Cr%C3%A9er+une+nouvelle+branche+pour+l%27ajout+de+ce+fichier%2C+et+la+nommer+du+m%C3%AAme+nom+que+le+fichier+%60nom_api%60.%0D%0A-+%5B+%5D+Ouvrir+une+pull+request+pour+valider+l%27int%C3%A9gration.%0D%0A-+%5B+%5D+Effacer+ce+texte+une+fois+que+vous+l%27avez+lu%0D%0A) :smiley:

> Sinon, offline : créer un nouveau fichier de description dans le dossier [`_api`](https://github.com/sgmap/api.gouv.fr/tree/gh-pages/_api) et renseigner les informations en prenant exemple sur un fichier de description existant déjà dans ce dossier.


## Ajouter une réutilisation

### [En un clic par l'interface web de GitHub](https://github.com/sgmap/api.gouv.fr/new/gh-pages/_reutilisation?filename=_reutilisation/nom_reuse.md&value=---%0D%0Aname%3A+Nom+Service+%23nom+du+service%0D%0Alink%3A+http%3A%2F%2Fservice.com+%23+lien+vers+le+service%0D%0Adescription%3A+Lorem+Ipsum+%23+description+rapide+du+service%0D%0Aapi%3A+%23+liste+des+API+utilis%C3%A9es+dans+le+service+%28utiliser+l%27attribut+name+de+l%27API%29%0D%0A+-+Nom+API%0D%0Ascreenshot%3A+screenshot.jpg+%23ajouter+un+screenshot+de+l%27API%0D%0Afeatured%3A+false+%23+est-ce+que+la+r%C3%A9utilisation+doit+%C3%AAtre+affich%C3%A9e+sur+la+page+d%27accueil.%0D%0A---%0D%0A%0D%0A%23%23+Description+du+service%0D%0A%0D%0ATexte+libre+au+format+%5BMarkdown%5D%28http%3A%2F%2Fricostacruz.com%2Fcheatsheets%2Fmarkdown.html%29.%0D%0A%0D%0A%0D%0A%23%23+Rappel%0D%0A%0D%0A-+%5B+%5D+Modifier+le+nom+du+fichier+%60nom_service.md%60+dans+le+champ+ci-dessus.%0D%0A-+%5B+%5D+Cr%C3%A9er+une+nouvelle+branche+pour+l%27ajout+de+ce+fichier%2C+et+la+nommer+du+m%C3%AAme+nom+que+le+fichier+%60nom_service%60.%0D%0A-+%5B+%5D+Ouvrir+une+pull+request+pour+valider+l%27int%C3%A9gration.%0D%0A-+%5B+%5D+Effacer+ce+texte+une+fois+que+vous+l%27avez+lu%0D%0A) :smiley:

> Sinon, offline : créer un nouveau fichier de description dans le dossier [`_reutilisation`](https://github.com/sgmap/api.gouv.fr/tree/gh-pages/_reutilisation) et renseigner les informations en prenant exemple sur un fichier de description existant déjà dans ce dossier.


## Éditer la description d'une API

Modifier le fichier de description de l'API dans le dossier [`_api`](https://github.com/sgmap/api.gouv.fr/tree/gh-pages/_api).


## Modifier le contenu éditorial

[Rechercher le contenu à modifier](https://github.com/sgmap/api.gouv.fr/search?q=contenu+à+modifier&type=Code) et éditer le fichier correspondant.


## Modifier les types d'API

Mettre à jour la propriété `api_type` dans [`_config.yml`](https://github.com/sgmap/api.gouv.fr/tree/gh-pages/_config.yml).

## Modifier les exemples de recherches

Mettre à jour la propriété `searchExamples` dans [`index.html`](https://github.com/sgmap/api.gouv.fr/tree/gh-pages/index.html).


## Modifier la présentation du site

Ce site est construit avec [Jekyll](https://jekyllrb.com/), un générateur de sites statiques. La version utilisée est celle [actuellement en production](https://github.com/jekyll/jekyll/issues/4441) sur GitHub Pages.

Pour l'améliorer, les informations dans le [README.md](https://github.com/sgmap/api.gouv.fr/blob/gh-pages/README.md) permettent d'installer la platforme en local.

Les fichiers pertinents pour une modification de la présentation sont probablement dans les dossiers `_layouts` et `css`.


## Modifier le logo

La source du logo est dans le répertoire `_sources`. Il s'agit d'un SVG contenant du texte. Pour le rendre accessible à tous les utilisateurs, il importe de le transformer en un SVG contenant des `path`.

Cela peut être fait à la ligne de commande avec [Inkscape](https://inkscape.org/fr/) :

```shell
inkscape --export-text-to-path $path_to_repo/_sources/logo.svg -l $path_to_repo/img/logo.svg
```

## Déployer

Ce site est déployé en continu avec [Github Pages](https://pages.github.com).

Pousser sur `gh-pages`, c’est partager avec le monde… ce qui signifie donc qu'il faut être très prudent avec ce pouvoir et privilégier l'usage de [pull requests](https://guides.github.com/introduction/flow/) :wink:
